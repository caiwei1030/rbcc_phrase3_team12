# App.py 修改说明文档

## 概述
本次修改将 `app.py` 的页面布局与样式更新为与 `app_1.py` 一致，并添加了完整的用户端和管理员端子系统，同时保持了原有的AI查询和统计分析功能。

## 主要修改内容

### 1. 页面布局与样式更新
- **CSS样式**: 采用 `app_1.py` 的简洁样式设计
- **水印样式**: 固定位置的水印，带有半透明背景和模糊效果
- **响应式设计**: 支持不同屏幕尺寸的响应式布局
- **表单容器**: 统一的表单样式和卡片设计

### 2. 用户认证系统
- **登录功能**: 用户名和密码验证
- **注册功能**: 新用户注册，支持角色选择
- **角色管理**: 区分普通用户和管理员权限
- **默认管理员**: 自动创建默认管理员账号 (admin/admin123)

### 3. 权限控制系统
- **管理员权限**: 完整的零件管理功能（增删改查）
- **普通用户权限**: 只读功能（查询、浏览、AI查询、统计）
- **功能菜单**: 根据用户角色动态显示可用功能

### 4. 功能模块
- **Part Management**: 零件管理（仅管理员）
  - 添加零件
  - 编辑零件
  - 删除零件
- **Part Query**: 零件查询（所有用户）
  - 关键词搜索
  - 浏览所有零件
  - 数据导出
- **AI Query**: AI智能查询（保持原有功能）
- **Statistics**: 统计分析（保持原有功能）

### 5. 数据管理
- **用户数据**: 存储在 `dataset/users.json`
- **零件数据**: 存储在 `dataset/parts.json`
- **报表数据**: 存储在 `dataset/reports.json`
- **图片支持**: 支持零件图片上传和显示

## 技术特点

### 安全性
- 密码哈希存储（SHA-256）
- 基于角色的访问控制
- 会话状态管理

### 用户体验
- 直观的侧边栏导航
- 清晰的权限提示
- 响应式界面设计
- 统一的消息提示系统

### 数据完整性
- 零件编号唯一性检查
- 数据验证和错误处理
- 自动数据目录创建

## 使用方法

### 首次使用
1. 运行应用后，系统会自动创建默认管理员账号
2. 默认账号：`admin` / `admin123`

### 管理员功能
1. 使用管理员账号登录
2. 可以访问所有功能模块
3. 管理零件数据库（增删改查）

### 普通用户功能
1. 注册或使用现有账号登录
2. 可以查询和浏览零件
3. 使用AI查询功能
4. 查看统计分析

## 文件结构
```
app.py                    # 主应用文件（已修改）
├── config.py            # 配置文件
├── database.py          # 数据库操作
├── ui.py               # UI组件
├── utils.py            # 工具函数
└── dataset/            # 数据目录
    ├── users.json      # 用户数据
    ├── parts.json      # 零件数据
    └── reports.json    # 报表数据
```

## 兼容性说明
- 保持了原有的AI查询功能
- 保持了原有的统计分析功能
- 保持了原有的摄像头识别功能
- 新增的用户系统不影响原有功能

## 注意事项
1. 首次运行会自动创建数据目录和默认管理员账号
2. 用户数据存储在本地JSON文件中
3. 建议定期备份用户数据和零件数据
4. 管理员可以创建新的管理员账号

## 更新日志
- 2025-08-17: 完成页面布局和样式更新
- 2025-08-17: 添加用户认证和权限控制系统
- 2025-08-17: 集成零件管理功能
- 2025-08-17: 保持原有AI功能完整性
